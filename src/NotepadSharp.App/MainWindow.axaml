<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:core="clr-namespace:NotepadSharp.Core;assembly=NotepadSharp.Core"
    xmlns:vm="clr-namespace:NotepadSharp.App.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="NotepadSharp.App.MainWindow"
    x:DataType="vm:MainWindowViewModel"
        MinWidth="720" MinHeight="480"
        Title="{Binding WindowTitle}">

    <DockPanel Background="{DynamicResource SystemControlBackgroundBaseLowBrush}">
        <Border DockPanel.Dock="Top"
                BorderThickness="0,0,0,1"
                BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                Background="{DynamicResource SystemControlBackgroundChromeLowBrush}">
            <Menu>
            <MenuItem Header="_File">
                <MenuItem Header="ðŸ“ _New (Ctrl/Cmd+N)" Click="OnNewClick" />
                <MenuItem Header="ðŸ“‚ _Open... (Ctrl/Cmd+O)" Click="OnOpenClick" />
                <MenuItem x:Name="OpenRecentMenuItem" Header="ðŸ•˜ Open _Recent" />
                <Separator />
                <MenuItem Header="ðŸ’¾ _Save (Ctrl/Cmd+S)" Click="OnSaveClick" />
                <MenuItem Header="ðŸ’¾ Save _As... (Ctrl/Cmd+Shift+S)" Click="OnSaveAsClick" />
                <Separator />
                <MenuItem Header="âœ– _Close Tab (Ctrl/Cmd+W)" Click="OnCloseTabClick" />
                <Separator />
                <MenuItem Header="â» E_xit" Click="OnExitClick" />
            </MenuItem>

            <MenuItem Header="_Edit">
                <MenuItem Header="â†¶ _Undo (Ctrl/Cmd+Z)" Click="OnUndoClick" />
                <MenuItem Header="â†· _Redo (Ctrl+Y / Ctrl/Cmd+Shift+Z)" Click="OnRedoClick" />
                <Separator />
                <MenuItem Header="ðŸ”Ž _Find... (Ctrl/Cmd+F)" Click="OnShowFindClick" />
                <MenuItem Header="ðŸ§© _Replace... (Ctrl/Cmd+H)" Click="OnShowReplaceClick" />
                <Separator />
                <MenuItem Header="â†• _Go To Line... (Ctrl/Cmd+G)" Click="OnGoToLineClick" />
            </MenuItem>

            <MenuItem Header="F_ormat">
                <MenuItem Header="Line _Endings">
                    <MenuItem Header="LF" Click="OnSetLineEndingLfClick" />
                    <MenuItem Header="CRLF" Click="OnSetLineEndingCrLfClick" />
                    <MenuItem Header="CR" Click="OnSetLineEndingCrClick" />
                </MenuItem>

                <MenuItem Header="_Encoding">
                    <MenuItem Header="UTF-8" Click="OnSetEncodingUtf8Click" />
                    <MenuItem Header="UTF-8 (BOM)" Click="OnSetEncodingUtf8BomClick" />
                    <MenuItem Header="UTF-16 LE" Click="OnSetEncodingUtf16LeClick" />
                    <MenuItem Header="UTF-16 BE" Click="OnSetEncodingUtf16BeClick" />
                </MenuItem>
            </MenuItem>

            <MenuItem Header="_Help">
                <MenuItem Header="âŒ¨ Keyboard _Shortcuts (F1 / Ctrl/Cmd+/)" Click="OnKeyboardShortcutsClick" />
            </MenuItem>
            </Menu>
        </Border>

        <Border DockPanel.Dock="Bottom"
                Padding="8"
                BorderThickness="0,1,0,0"
                BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                Background="{DynamicResource SystemControlBackgroundChromeLowBrush}">
            <DockPanel LastChildFill="False">
                <TextBlock DockPanel.Dock="Left" FontSize="12" Opacity="0.85" Text="{Binding StatusCaret}" />
                <TextBlock DockPanel.Dock="Right" FontSize="12" Opacity="0.85" Text="{Binding StatusFormat}" />
            </DockPanel>
        </Border>

        <Border DockPanel.Dock="Top"
                Margin="8,8,8,0"
                Padding="10"
                CornerRadius="8"
                BorderThickness="1"
                BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                Background="{DynamicResource SystemControlBackgroundChromeLowBrush}"
                IsVisible="{Binding IsFindReplaceVisible}">
            <Grid ColumnDefinitions="Auto,*,Auto,Auto,Auto" RowDefinitions="Auto,Auto" ColumnSpacing="8" RowSpacing="8">
                <TextBlock Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" Text="Find" />
                <TextBox x:Name="FindTextBox" Grid.Row="0" Grid.Column="1" Watermark="Find" Text="{Binding FindText, Mode=TwoWay}" />
                <Button Grid.Row="0" Grid.Column="2" Content="Prev" Click="OnFindPrevClick" />
                <Button Grid.Row="0" Grid.Column="3" Content="Next" Click="OnFindNextClick" />
                <Button Grid.Row="0" Grid.Column="4" Content="Close" Click="OnHideFindReplaceClick" />

                <TextBlock Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" Text="Replace" IsVisible="{Binding IsReplaceVisible}" />
                <TextBox x:Name="ReplaceTextBox" Grid.Row="1" Grid.Column="1" Watermark="Replace" Text="{Binding ReplaceText, Mode=TwoWay}" IsVisible="{Binding IsReplaceVisible}" />
                <Button Grid.Row="1" Grid.Column="2" Content="Replace" Click="OnReplaceClick" IsVisible="{Binding IsReplaceVisible}" />
                <Button Grid.Row="1" Grid.Column="3" Content="Replace All" Click="OnReplaceAllClick" IsVisible="{Binding IsReplaceVisible}" />
                <CheckBox Grid.Row="1" Grid.Column="4" Content="Match case" IsChecked="{Binding MatchCase, Mode=TwoWay}" />
            </Grid>
        </Border>

        <TabControl DockPanel.Dock="Top" Margin="8,0,8,0" ItemsSource="{Binding Documents}" SelectedItem="{Binding SelectedDocument}">
            <TabControl.ItemTemplate>
                <DataTemplate x:DataType="core:TextDocument">
                    <DockPanel LastChildFill="False" VerticalAlignment="Center">
                        <TextBlock DockPanel.Dock="Left" Text="{Binding DisplayName}" />
                        <Button DockPanel.Dock="Right"
                                Content="Ã—"
                                ToolTip.Tip="Close"
                                Padding="6,0"
                                Margin="8,0,0,0"
                                BorderThickness="0"
                                Background="Transparent"
                                Click="OnCloseTabButtonClick" />
                    </DockPanel>
                </DataTemplate>
            </TabControl.ItemTemplate>

            <!-- We render the editor separately; keep the TabControl as a tab strip only. -->
            <TabControl.ContentTemplate>
                <DataTemplate>
                    <Border Height="0" />
                </DataTemplate>
            </TabControl.ContentTemplate>
        </TabControl>

        <Border Margin="8"
                CornerRadius="10"
                BorderThickness="1"
                BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                Background="{DynamicResource SystemControlBackgroundAltHighBrush}">
            <TextBox x:Name="EditorTextBox"
                     Padding="10"
                     FontSize="14"
                     BorderThickness="0"
                     Background="Transparent"
                     Text="{Binding SelectedDocument.Text, Mode=TwoWay}"
                     AcceptsReturn="True" AcceptsTab="True"
                     ScrollViewer.VerticalScrollBarVisibility="Auto"
                     ScrollViewer.HorizontalScrollBarVisibility="Auto" />
        </Border>
    </DockPanel>
</Window>
